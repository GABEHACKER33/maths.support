<script>
    // Real educational math games database
    // Focused on actual math skills: arithmetic, fractions, geometry, logic, etc.
    // All are free browser-playable (no login for basic access in most cases)
    const games = [
        { 
            title: 'Alien Addition', 
            category: 'addition', 
            url: 'https://www.coolmath4kids.com/math-games/alien-addition', 
            image: 'https://images.unsplash.com/photo-1581092160560-1c1e428e9d65?w=400&h=300&fit=crop', 
            description: 'Add numbers to feed friendly aliens!'
        },
        { 
            title: 'Grand Prix Multiplication', 
            category: 'multiplication', 
            url: 'https://www.coolmath4kids.com/math-games/grand-prix-multiplication', 
            image: 'https://images.unsplash.com/photo-1567603191355-9a6d0d292268?w=400&h=300&fit=crop', 
            description: 'Race cars by answering multiplication facts fast.'
        },
        { 
            title: 'Dirt Bike Fractions', 
            category: 'fractions', 
            url: 'https://www.coolmath4kids.com/math-games/dirt-bike-fractions', 
            image: 'https://images.unsplash.com/photo-1509228627929-8243eb4676d3?w=400&h=300&fit=crop', 
            description: 'Compare and order fractions to win dirt bike races.'
        },
        { 
            title: 'Math Slither', 
            category: 'arithmetic', 
            url: 'https://www.mathgames.com/play/math-slither.html', 
            image: 'https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=400&h=300&fit=crop', 
            description: 'Slither like a snake while solving math problems to grow.'
        },
        { 
            title: 'Jet Ski Addition', 
            category: 'addition', 
            url: 'https://www.coolmath4kids.com/math-games/jet-ski-addition', 
            image: 'https://images.unsplash.com/photo-1606326608606-aa0b62935f2b?w=400&h=300&fit=crop', 
            description: 'Ride jetskis and answer addition questions quickly.'
        },
        { 
            title: 'Fraction Tiles', 
            category: 'fractions', 
            url: 'https://www.mathplayground.com/fraction_tiles.html', 
            image: 'https://images.unsplash.com/photo-1590103514966-ae587832a69e?w=400&h=300&fit=crop', 
            description: 'Visual fraction matching and comparison.'
        },
        { 
            title: 'Multiplication Grand Prix', 
            category: 'multiplication', 
            url: 'https://www.mathplayground.com/ASB_MultiplicationGrandPrix.html', 
            image: 'https://images.unsplash.com/photo-1632501641765-e568d28b0015?w=400&h=300&fit=crop', 
            description: 'Formula 1 style multiplication racing.'
        },
        { 
            title: 'Puppies & Kittens', 
            category: 'decimals', 
            url: 'https://www.mathplayground.com/ASB_Puppies_Kittens.html', 
            image: 'https://images.unsplash.com/photo-1511512578047-dfb367046420?w=400&h=300&fit=crop', 
            description: 'Rescue animals by converting fractions to decimals.'
        },
        { 
            title: 'Swim for Fraction Goals', 
            category: 'fractions', 
            url: 'https://www.mathplayground.com/SwimForFractions.html', 
            image: 'https://images.unsplash.com/photo-1609710228159-0fa9bd7c0827?w=400&h=300&fit=crop', 
            description: 'Swim to score goals using equivalent fractions.'
        },
        { 
            title: 'Math Agar', 
            category: 'arithmetic', 
            url: 'https://www.mathgames.com/play/mathagar.html', 
            image: 'https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=400&h=300&fit=crop', 
            description: 'Agar.io style game â€” eat dots by solving math.'
        },
        { 
            title: 'Island Chase', 
            category: 'subtraction', 
            url: 'https://www.coolmath4kids.com/math-games/island-chase-subtraction', 
            image: 'https://images.unsplash.com/photo-1566694271453-390536dd1f0d?w=400&h=300&fit=crop', 
            description: 'Subtraction facts while chasing on islands.'
        },
        { 
            title: 'Demolition Division', 
            category: 'division', 
            url: 'https://www.coolmath4kids.com/math-games/demolition-division', 
            image: 'https://images.unsplash.com/photo-1529699211952-734e80c4d42b?w=400&h=300&fit=crop', 
            description: 'Destroy buildings with correct division answers.'
        }
    ];

    let searchQuery = '';
    let autoDarkMode = true;

    // Auto dark mode based on time (6 PM - 6 AM)
    function setThemeByTime() {
        if (!autoDarkMode) return;
        
        const hour = new Date().getHours();
        const isDark = hour < 6 || hour >= 18;
        
        if (isDark) {
            document.body.classList.add('dark-mode');
            document.getElementById('darkModeToggle').classList.add('active');
        } else {
            document.body.classList.remove('dark-mode');
            document.getElementById('darkModeToggle').classList.remove('active');
        }
    }

    // ... (keep all your existing toggle, navigation, modal, search, fullscreen, etc. code unchanged)

    // Updated render function with better card layout
    function renderGames() {
        const gamesGrid = document.getElementById('gamesGrid');
        const filteredGames = games.filter(game => 
            game.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
            game.category.toLowerCase().includes(searchQuery.toLowerCase())
        );

        gamesGrid.innerHTML = filteredGames.map(game => `
            <div class="game-card" onclick="openGame('${game.title}', '${game.url}')">
                <div class="game-thumbnail">
                    <img src="${game.image}" alt="${game.title}" 
                         onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27400%27 height=%27300%27%3E%3Crect fill=%27%234F46E5%27 width=%27400%27 height=%27300%27/%3E%3Ctext x=%2750%25%27 y=%2740%25%27 dominant-baseline=%27middle%27 text-anchor=%27middle%27 font-family=%27Arial%27 font-size=%2740%27 fill=%27white%27%3E${game.title.substring(0,12)}%3C/text%3E%3Ctext x=%2750%25%27 y=%2760%25%27 dominant-baseline=%27middle%27 text-anchor=%27middle%27 font-size=%2724%27 fill=%27white%27%3EMath Game%3C/text%3E%3C/svg%3E'">
                </div>
                <div class="game-info">
                    <div class="game-title">${game.title}</div>
                    <small style="color: var(--text-secondary);">${game.category.charAt(0).toUpperCase() + game.category.slice(1)}</small>
                </div>
            </div>
        `).join('');
    }

    // Keep your openGame, close, fullscreen, search input listener, etc.

    // Initialize
    setThemeByTime();
    renderGames();
</script>
